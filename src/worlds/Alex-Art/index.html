<html>
  <head>
    <meta charset="utf-8">

    <!-- Circles' head scripts [REQUIRED] -->
    <circles-start-scripts/>
    <script src="https://unpkg.com/aframe-environment-component@1.3.2/dist/aframe-environment-component.min.js"></script>
    
  </head>
  <body>

    <!-- 2D UI elements overylayed on the 3D scene for user options -->
    <circles-basic-ui/>

    <!-- this is used to create our enter UI that creates a 2D overlay to capture a user gesture for sound/mic access etc. -->
    <circles-start-ui/>

    <!-- a-scene with 'circles-properties' component [REQUIRED] -->
    <a-scene circles_scene_properties button>
      <a-assets>

        <!-- assets -->
        <img id="moose_img" src="/worlds/Alex-Art/assets/moose.JPG">
        <img id="wave_img" src="/worlds/Alex-Art/assets/wave.png">
        <img id="cedar_img" src="/worlds/Alex-Art/assets/cedar.png">
    
        <!-- Circles' built-in assets [REQUIRED] -->
        <circles-assets/>
      </a-assets>
 
      <!-- Circles' built-in manager and avatar [REQUIRED] -->
      <circles-manager-avatar/>
      <a-entity environment="preset: arches;  grid: none;  dressing: none; groundColor: #4c4542;"></a-entity>

        <!-- BIO TEXT     -->
        <a-entity geometry="" material="color: #1f1f1f" id="text-box" position="-1.72 2.209 -7.70486" scale="4.166 2.982 0.243"></a-entity>
        <a-entity id="text" position="-0.7279 3.36427 -7.55833" scale="3.387 3.451 3.387" text="value: Artist: Alexandra Antle"></a-entity>

<a-entity id="text_body" position="-1.697 2.01197 -7.58469" scale="2.927 2.927 2.927" text__body="value: Alex Antle is a Lâ€™nu multidisciplinary artist located in Central Newfoundland. She primarily 
    works with slow stitching practices, including beadwork and caribou tufting and has recently 
    introduced printmaking and photography into her practice. Alex has been learning from a 
    community of local Mi'kmaq artisans since 2018. \n
    Alex's artwork explores the relationship between tradition and modern Mi'kmaq people, living 
    culture, and the importance of land and water. Alex has exhibited her work in galleries across 
    Canada, participated in art festivals, and frequently shares her skills through workshops. In 2021, 
    Alex received the emerging artist award from VANL-CARFAC., Canada; color: #9c9c9c; align: center"></a-entity>
    
<!-- Images -->
<a-image src="#moose_img" material="" geometry="" position="-7.02198 2.001 6.76025" rotation="0 132.23063770706216 0" scale="2.66391 2.66391 2.66391" id="moose_plane"></a-image>
<a-image src="#wave_img" material="" geometry="" position="-8.38701 2.001 -6.27816" rotation="0 90 0" scale="2.60191 2.60191 2.60191" id="moose_plane"></a-image>
<a-image src="#cedar_img" material="" geometry="" position="0.70381 2.001 8.14698" rotation="0 180 0" scale="2 2.5 2" id="moose_plane"></a-image>


<!-- light -->
<a-entity light="intensity: 15; type: point" rotation="-23.313652683873197 100.67899784479799 64.52364209865766" position="0 6.09232 0" id="point-light"></a-entity>

       <!-- cedar art -->
      
       <a-entity id="cedar" position="-2.757 -0.09 6.82408" rotation="0 90 0" scale="0.5 0.5 0.5" gltf-model="/worlds/Alex-Art/assets/cedar_object.glb"></a-entity>


       <!-- moose art -->
        
        <a-entity id="moose_normals" 
        position="-7.18452 -0.04 3.06268" 
        rotation="0 0 0" 
        scale="0.5 0.5 0.5" 
        gltf-model="/worlds/Alex-Art/assets/moose_normals_v4.glb">
      </a-entity>

      <a-entity id="wave_art" position="-7.18452 -0.04 -2.13104" rotation="" scale="0.5 0.5 0.5" gltf-model="/worlds/Alex-Art/assets/wave_pedestal.glb">
      </a-entity>
      
      
      
      
      
      
      
      
      <!-- OLD SCRIPT FOR BUMP MAPPING

      <script>
        AFRAME.registerComponent('apply-bump-map', {
          schema: {
            materialIndex: { type: 'int', default: 0 },  // Index of the material to target
            bumpMapSrc: { type: 'string' }  // URL of the bump map texture
          },
          init: function () {
            var el = this.el;
            var data = this.data;
            var textureLoader = new THREE.TextureLoader();
  
            // Load the bump map texture
            var bumpMap = textureLoader.load('/worlds/Alex-Art/assets/moose_bump_v7.png');
  
            // Wait for the model to be loaded
            el.addEventListener('model-loaded', function () {
              var model = el.getObject3D('mesh');
  
              if (!model) {
                console.error('Model not found!');
                return;
              }
  
              // Apply the bump map to the specified material
              model.traverse(function (node) {
                if (node.isMesh && node.material) {
                  // If the mesh has multiple materials
                  if (Array.isArray(node.material)) {
                    if (node.material[data.materialIndex]) {
                      node.material[data.materialIndex].bumpMap = bumpMap;
                      node.material[data.materialIndex].needsUpdate = true;
                      console.log("Material data: "+ node.material[data.materialIndex]);
                    }
                  } else {
                    // If the mesh has a single material
                    node.material.bumpMap = bumpMap;
                    node.material.needsUpdate = true;
                  }
                }
              });
            });
          }
        });
  
        // Add the custom component to your entity with specific attributes
        document.querySelector('#mooseModelEntity').setAttribute('apply-bump-map', {
          materialIndex: 2,  // Change this index to target different materials
          bumpMapSrc: '/worlds/Alex-Art/assets/moose_bump_v7.png'  // Path to your bump map texture
        });
      </script> -->



      <!-- version 2 -->
      <!-- <script>
        AFRAME.registerComponent('apply-materials', {
          init: function () {
            var el = this.el;
            var textureLoader = new THREE.TextureLoader();
  
            // Load textures
            var bumpMap = textureLoader.load('/worlds/Alex-Art/assets/moose_bump_v7.png');
           
          
  
            // Wait for the model to be loaded
            el.addEventListener('model-loaded', function () {
              var model = el.getObject3D('mesh');
  
              if (!model) {
                console.error('Model not found!');
                return;
              }
  
              // Apply the custom materials to the model's mesh
              model.traverse(function (node) {
                if (node.isMesh) {
                  var material = new THREE.MeshStandardMaterial({
                    bumpMap: bumpMap,
                   
                  });

                  console.log('Model bump updated');
  
                  node.material = material;
                  node.material.needsUpdate = true;
                }
              });
            });
          }
        });
  
        // Add the custom component to your entity
        document.querySelector('#mooseModelEntity').setAttribute('apply-materials', '');
      </script> -->

      
        

    <!-- Circles' end scripts [REQUIRED] -->
    <circles-end-scripts/>
  </body>
</html>
