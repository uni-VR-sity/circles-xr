<html>
  <head>
    <meta charset="utf-8">

    <!-- Circles' head scripts [REQUIRED] -->
    <circles-start-scripts/>
    <script src="https://unpkg.com/aframe-environment-component@1.3.2/dist/aframe-environment-component.min.js"></script>
    <!-- <script src="/worlds/Alex-Art/bumpmap.js"></script> -->


  </head>
  <body>

    <!-- 2D UI elements overylayed on the 3D scene for user options -->
    <circles-basic-ui/>

    <!-- this is used to create our enter UI that creates a 2D overlay to capture a user gesture for sound/mic access etc. -->
    <circles-start-ui/>

    <!-- a-scene with 'circles-properties' component [REQUIRED] -->
    <a-scene circles_scene_properties button>
      <a-assets>

        <!-- assets -->
        
        <!-- <a-asset-item id="moose" src="/worlds/Tyler-Compton-Art/assets/moose_object.glb" response-type="arraybuffer"></a-asset-item> -->
        <img id="deer_img" src="/worlds/Tyler-Compton-Art/assets/deer_art.jpg">
    
 
  
        <!-- Circles' built-in assets [REQUIRED] -->
        <circles-assets/>
      </a-assets>
 
      <!-- Circles' built-in manager and avatar [REQUIRED] -->
      <circles-manager-avatar/>
      <a-entity environment="preset: arches;  grid: none;  dressing: none; groundColor: #4c4542;"></a-entity>

        <!-- BIO TEXT     -->
    <a-entity geometry="primitive: box" material="color: #737373" id="text-box" position="-1.72 1.62 -5.370" scale="4.166 2.3 0.243"></a-entity>

    <a-entity id="text" position="-0.7279 2.491 -5.247" scale="3.387 3.387 3.387" text="value: Artist: Alexandra Antle
    ;"></a-entity>
  
    <a-entity id="text_body" position="-1.697 2.01197  -5.243" scale="2.927 2.927 2.927" text__body="value: Born:____, Canada; color: #9c9c9c; align: center"></a-entity>
    
    <a-entity id="text_body" position="-1.69714 1.7 -5.24328" scale="2.927 2.927 2.927" text__body="value: Language of ancestors: ___; color: #9c9c9c; align: center"></a-entity>
    
    <a-entity id="text_body" position="-1.69714 1.4 -5.24328" scale="2.92671 2.92671 2.92671" text__body="value: ______; color: #9c9c9c; align: center"></a-entity>

    <a-entity id="text_body" position="-1.69714 1.0 -5.24328" scale="2.92671 2.92671 2.92671" text__body="value: _______; color: #9c9c9c; align: center"></a-entity>


<!-- light -->
<a-entity light="intensity: 15; type: point" rotation="-23.313652683873197 100.67899784479799 64.52364209865766" position="0 6.09232 0" id="point-light"></a-entity>

       <!-- cedar art -->
      
       <a-entity id="cedar" position="-2.757 -0.09 6.82408" rotation="0 90 0" scale="0.5 0.5 0.5" gltf-model="/worlds/Alex-Art/assets/cedar_object.glb"></a-entity>


       <!-- moose art -->
        
        <a-entity id="moose_normals" 
        position="-7.18452 -0.04 3.06268" 
        rotation="0 0 0" 
        scale="0.5 0.5 0.5" 
        gltf-model="/worlds/Alex-Art/assets/moose_normals_v4.glb">
      </a-entity>

      <a-entity id="wave_art" 
      position="-7.18452 -0.04 -2.841" 
      rotation="0 0 0" 
      scale="0.5 0.5 0.5" 
      gltf-model="/worlds/Alex-Art/assets/wave_pedestal.glb">
    </a-entity>
      
      
      
      
      
      
      
      
      <!-- OLD SCRIPT FOR BUMP MAPPING

      <script>
        AFRAME.registerComponent('apply-bump-map', {
          schema: {
            materialIndex: { type: 'int', default: 0 },  // Index of the material to target
            bumpMapSrc: { type: 'string' }  // URL of the bump map texture
          },
          init: function () {
            var el = this.el;
            var data = this.data;
            var textureLoader = new THREE.TextureLoader();
  
            // Load the bump map texture
            var bumpMap = textureLoader.load('/worlds/Alex-Art/assets/moose_bump_v7.png');
  
            // Wait for the model to be loaded
            el.addEventListener('model-loaded', function () {
              var model = el.getObject3D('mesh');
  
              if (!model) {
                console.error('Model not found!');
                return;
              }
  
              // Apply the bump map to the specified material
              model.traverse(function (node) {
                if (node.isMesh && node.material) {
                  // If the mesh has multiple materials
                  if (Array.isArray(node.material)) {
                    if (node.material[data.materialIndex]) {
                      node.material[data.materialIndex].bumpMap = bumpMap;
                      node.material[data.materialIndex].needsUpdate = true;
                      console.log("Material data: "+ node.material[data.materialIndex]);
                    }
                  } else {
                    // If the mesh has a single material
                    node.material.bumpMap = bumpMap;
                    node.material.needsUpdate = true;
                  }
                }
              });
            });
          }
        });
  
        // Add the custom component to your entity with specific attributes
        document.querySelector('#mooseModelEntity').setAttribute('apply-bump-map', {
          materialIndex: 2,  // Change this index to target different materials
          bumpMapSrc: '/worlds/Alex-Art/assets/moose_bump_v7.png'  // Path to your bump map texture
        });
      </script> -->



      <!-- version 2 -->
      <!-- <script>
        AFRAME.registerComponent('apply-materials', {
          init: function () {
            var el = this.el;
            var textureLoader = new THREE.TextureLoader();
  
            // Load textures
            var bumpMap = textureLoader.load('/worlds/Alex-Art/assets/moose_bump_v7.png');
           
          
  
            // Wait for the model to be loaded
            el.addEventListener('model-loaded', function () {
              var model = el.getObject3D('mesh');
  
              if (!model) {
                console.error('Model not found!');
                return;
              }
  
              // Apply the custom materials to the model's mesh
              model.traverse(function (node) {
                if (node.isMesh) {
                  var material = new THREE.MeshStandardMaterial({
                    bumpMap: bumpMap,
                   
                  });

                  console.log('Model bump updated');
  
                  node.material = material;
                  node.material.needsUpdate = true;
                }
              });
            });
          }
        });
  
        // Add the custom component to your entity
        document.querySelector('#mooseModelEntity').setAttribute('apply-materials', '');
      </script> -->

      
        

    <!-- Circles' end scripts [REQUIRED] -->
    <circles-end-scripts/>
  </body>
</html>
