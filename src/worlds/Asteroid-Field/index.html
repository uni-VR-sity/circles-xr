<html>
  <head>

    <meta charset="utf-8">

    <!-- Circles' head scripts (no networking) [REQUIRED] -->
    <circles-start-scripts/>

    <!-- Game scripts -->
    <script src="/worlds/Asteroid-Field/scripts/game-manager.js"></script>
    <script src="/worlds/Asteroid-Field/scripts/player.js"></script>
    <script src="/worlds/Asteroid-Field/scripts/player-wasd.js"></script>
    <script src="/worlds/Asteroid-Field/scripts/asteroid.js"></script>
    <script src="/worlds/Asteroid-Field/scripts/asteroid-spawner.js"></script>

    <!-- Physics scripts -->
    <script src="/global/js/libs/aframe-physics-system.min.js"></script>
    <script src="https://unpkg.com/aframe-physics-extras@0.1.2/dist/aframe-physics-extras.min.js"></script>

    <!-- Controller scripts -->
    <script src="https://unpkg.com/aframe-haptics-component/dist/aframe-haptics-component.min.js"></script>

  </head>
  <body>

    <!-- 2D UI elements overylayed on the 3D scene for user options -->
    <circles-basic-ui/>

    <!-- This is used to create our enter UI that creates a 2D overlay to capture a user gesture for sound/mic access etc. (no avatar - no wardrobe button) -->
    <circles-NA-start-ui/>

    <!-- a-scene with 'circles-properties' component (no networking) [REQUIRED] -->
    <a-scene circles_NN_scene_properties 
             background="color: #000000" 
             animation__hit1="property: background.color; type: color; from: #000000; to: #000000; dur: 500; startEvents: hitAnimation;"
             animation__hit2="property: background.color; type: color; from: #000000; to: #000000; dur: 500; delay: 500; startEvents: hitAnimation;"
             physics="debug: false;"
             stats>

      <a-assets>

        <!-- Hearts -->
        <a-asset-item id="red-heart-gltf" src="/worlds/Asteroid-Field/assets/models/redHeart.glb" response-type="arraybuffer"></a-asset-item>
        <a-asset-item id="grey-heart-gltf" src="/worlds/Asteroid-Field/assets/models/greyHeart.glb" response-type="arraybuffer"></a-asset-item>

        <!-- Asteroids -->
        <a-asset-item id="asteroid-1-gltf" src="/worlds/Asteroid-Field/assets/models/asteroid1.glb" response-type="arraybuffer"></a-asset-item>
        <a-asset-item id="asteroid-2-gltf" src="/worlds/Asteroid-Field/assets/models/asteroid2.glb" response-type="arraybuffer"></a-asset-item>
        <a-asset-item id="asteroid-3-gltf" src="/worlds/Asteroid-Field/assets/models/asteroid3.glb" response-type="arraybuffer"></a-asset-item>
        <a-asset-item id="asteroid-4-gltf" src="/worlds/Asteroid-Field/assets/models/asteroid4.glb" response-type="arraybuffer"></a-asset-item>
        <a-asset-item id="asteroid-5-gltf" src="/worlds/Asteroid-Field/assets/models/asteroid5.glb" response-type="arraybuffer"></a-asset-item>
        <a-asset-item id="asteroid-6-gltf" src="/worlds/Asteroid-Field/assets/models/asteroid6.glb" response-type="arraybuffer"></a-asset-item>
        <a-asset-item id="asteroid-7-gltf" src="/worlds/Asteroid-Field/assets/models/asteroid7.glb" response-type="arraybuffer"></a-asset-item>
        <a-asset-item id="asteroid-8-gltf" src="/worlds/Asteroid-Field/assets/models/asteroid8.glb" response-type="arraybuffer"></a-asset-item>
        <a-asset-item id="asteroid-9-gltf" src="/worlds/Asteroid-Field/assets/models/asteroid9.glb" response-type="arraybuffer"></a-asset-item>
        <a-asset-item id="asteroid-10-gltf" src="/worlds/Asteroid-Field/assets/models/asteroid10.glb" response-type="arraybuffer"></a-asset-item>

        <!-- Letters -->
        <a-asset-item id="title-gltf" src="/worlds/Asteroid-Field/assets/models/title.glb" response-type="arraybuffer"></a-asset-item>
        <a-asset-item id="play-gltf" src="/worlds/Asteroid-Field/assets/models/play.glb" response-type="arraybuffer"></a-asset-item>
        <a-asset-item id="play-hover-gltf" src="/worlds/Asteroid-Field/assets/models/play-hover.glb" response-type="arraybuffer"></a-asset-item>
        <a-asset-item id="restart-gltf" src="/worlds/Asteroid-Field/assets/models/restart.glb" response-type="arraybuffer"></a-asset-item>
        <a-asset-item id="restart-hover-gltf" src="/worlds/Asteroid-Field/assets/models/restart-hover.glb" response-type="arraybuffer"></a-asset-item>

      </a-assets>

      <!-- Circles' built-in manager and avatar (no avatar) [REQUIRED] -->
      <circles-NA-manager-avatar/>

      <!---------------------------------------------------------------------------------------------------------------------->

      <!-- Light -->
      <a-entity position="0 1 2"
                light="type:directional; castShadow:true; intensity:0.5">
      </a-entity>

      <!-- Game manager -->
      <a-entity id="game-manager"
                game-manager>
      </a-entity>

      <!-- Player -->
      <a-entity id="player"
                player>
      
        <a-entity camera
                  look-controls="mouseEnabled:false;"
                  static-body="shape:sphere"
                  collision-filter="group:player">
        </a-entity>

        <!-- Game stats container -->
        <a-entity id="game-stats-container"
                  visible="false">

          <!-- Score container -->
          <!--
          <a-entity id="score-container"
                    position="0 -0.25 0">

            <a-entity position="0 0 0"
                      geometry="primitive:plane; height:0.05; width:2"
                      material="color:white; shader:flat;">
            </a-entity>

            <a-entity id="score"
                      position="0 -0.35 0"
                      text="value:0; align:center; width:2; wrapCount:15; color:white; shader:flat;">
            </a-entity>

          </a-entity>
          -->

          <!-- Lives container -->
          <a-entity id="lives-container"
                    position="0 0.25 0"
                    scale="0.5 0.5 0.5">

            <!-- 1 -->
            <a-entity id="active-life-1"
                      position="-1.5 0 0"
                      gltf-model="#red-heart-gltf">
            </a-entity>

            <a-entity id="disabled-life-1"
                      position="-1.5 0 0"
                      gltf-model="#grey-heart-gltf"
                      visible="false">
            </a-entity>

            <!-- 2 -->
            <a-entity id="active-life-2"
                      position="0 0 0"
                      gltf-model="#red-heart-gltf">
            </a-entity>

            <a-entity id="disabled-life-2"
                      position="0 0 0"
                      gltf-model="#grey-heart-gltf"
                      visible="false">
            </a-entity>

            <!-- 3 -->
            <a-entity id="active-life-3"
                      position="1.5 0 0"
                      gltf-model="#red-heart-gltf">
            </a-entity>

            <a-entity id="disabled-life-3"
                      position="1.5 0 0"
                      gltf-model="#grey-heart-gltf"
                      visible="false">
            </a-entity>

          </a-entity>

        </a-entity>

      </a-entity>
      

      <!-- Start screen -->
      <a-entity id="start-screen"
                visible="false">

        <!-- Title -->
        <a-entity position="0 1.5 0"
                  gltf-model="#title-gltf">
        </a-entity>

        <!-- Asteroids -->
        <a-entity position="-6.5 -2 -10"
                  rotation="0 -50 0"
                  gltf-model="#asteroid-1-gltf">
        </a-entity>

        <a-entity position="-6.8 -4.6 -3"
                  rotation="-23 70 8.5"
                  gltf-model="#asteroid-3-gltf">
        </a-entity>

        <a-entity position="-7.5 4.5 -1"
                  rotation="-23 70 8.5"
                  gltf-model="#asteroid-5-gltf">
        </a-entity>

        <a-entity position="5 -1.8 -0.5"
                  rotation="0 -50 0"
                  gltf-model="#asteroid-7-gltf">
        </a-entity>

        <a-entity position="2.7 5.5 -3"
                  rotation="0 -50 0"
                  gltf-model="#asteroid-9-gltf">
        </a-entity>

        <a-entity position="7 2 0"
                  rotation="-50 -42 40"
                  gltf-model="#asteroid-10-gltf">
        </a-entity>

        <!-- Button -->
        <a-entity id="play-button"
                  position="0 -2 0"
                  rotation="-15"
                  geometry="primitive:box; height:0.8; width:3"
                  visible="false">
        </a-entity>

        <a-entity id="play-default"
                  position="0 -2 0"
                  rotation="-15"
                  gltf-model="#play-gltf">
        </a-entity>

        <a-entity id="play-hover"
                  position="0 -2 0"
                  rotation="-15"
                  gltf-model="#play-hover-gltf"
                  visible="false">
        </a-entity>

      </a-entity>

      <!-- Restart screen -->
      <a-entity id="restart-screen"
                visible="false">

        <!-- Title -->
        <a-entity position="0 1.5 0"
                  gltf-model="#title-gltf">
        </a-entity>

        <!-- Asteroids -->
        <a-entity position="-6.5 -2 -10"
                  rotation="0 -50 0"
                  gltf-model="#asteroid-1-gltf">
        </a-entity>

        <a-entity position="-6.8 -4.6 -3"
                  rotation="-23 70 8.5"
                  gltf-model="#asteroid-3-gltf">
        </a-entity>

        <a-entity position="-7.5 4.5 -1"
                  rotation="-23 70 8.5"
                  gltf-model="#asteroid-5-gltf">
        </a-entity>

        <a-entity position="5 -1.8 -0.5"
                  rotation="0 -50 0"
                  gltf-model="#asteroid-7-gltf">
        </a-entity>

        <a-entity position="2.7 5.5 -3"
                  rotation="0 -50 0"
                  gltf-model="#asteroid-9-gltf">
        </a-entity>

        <a-entity position="7 2 0"
                  rotation="-50 -42 40"
                  gltf-model="#asteroid-10-gltf">
        </a-entity>

        <!-- Button -->
        <a-entity id="restart-button"
                  position="0 -2 0"
                  rotation="-15"
                  geometry="primitive:box; height:0.8; width:5"
                  visible="false">
        </a-entity>

        <a-entity id="restart-default"
                  position="0 -2 0"
                  rotation="-15"
                  gltf-model="#restart-gltf">
        </a-entity>

        <a-entity id="restart-hover"
                  position="0 -2 0"
                  rotation="-15"
                  gltf-model="#restart-hover-gltf"
                  visible="false">
        </a-entity>

      </a-entity>

      <!-- Asteroid spawner -->
      <a-entity id="spawner">
      </a-entity>

      <!-- Asteroid container -->
      <a-entity id="asteroid-container">
      </a-entity>

    </a-scene>

    <!-- Circles' end scripts (no networking) [REQUIRED] -->
    <circles-NN-end-scripts/>

  </body>
</html>